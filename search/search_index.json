{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"These pages document all of the features, setup instructions and configuration guides for the Captain Discord bot .","title":"Welcome"},{"location":"config/","text":"In this guide, I'll run through all of Captain's configuration options and how to use them. Danger Captain's configuration uses something called yaml, if you do not know how to use this do not attempt to configure Captain, you will probably break it . If you need help, feel free to ask in the official Discord server !","title":"Introduction"},{"location":"config/access-control/","text":"In short, the access_control section allows server admins to configure which roles are allowed to use what commands. Example access_control : 123456789098765432 : # role ID level : 100 # 100 = admin (all commands) 123456789098765432 : # role ID level : 90 # 90 = mod (all commands except lockdown) 123456789098765432 : # role ID level : 90 # the same level can exist more than once overwrites : # by denying access to certain commands, this effectively becomes a \"trial mod\" role unban : false # each overwrite is in the format [command name: true/false] ban : false 123456789098765432 : # role ID level : 10 # 10 = trusted (all non-mod commands + some easter eggs) everyone : # everyone = every single member. This could also be a role ID for members, if you want level : 0 # 0 = default (non-mod commands) Levels and what they mean \u00b6 A level is sort of like a preset of commands that a role should use. For example, users with the mod level should be able to use Moderation commands, but not Administration commands (such as lockdown and infraction clearing). Below, you'll find a table showing which level ID matches a particular role. Role Level Administrator 100 Moderator 90 Trusted 10 Default 0 Creating your own levels \u00b6 Currently, there's no way to create your own level designation (e.g. 80 for trial mod), but it is planned. However, you can achieve the same effect by using an existing level as a base then adding overwrites. For example, here's what a trial mod level would look like (trial mods may have different access to commands for your server but the idea is the same). access_control : 123456789098765432 : # role ID level : 90 # we'll use moderator as a base here overwrites : ban : false unban : false inf search : false inf recent : false Breaking it down \u00b6 Alright so this look a little scary at first, but I promise it isn't! To summarise, the example above essentially means: trial mods can use all mod commands apart from ban, unban, inf search and inf recent . If you're still struggling, the good guys and gals in the official Discord server can give you a hand! Hierarchy \u00b6 The hierarchy for overlapping levels can be incredibly confusing, but I'll try to summarise it anyway. In short, the user's access to commands is first affected by their highest level. If their highest level doesn't affect a certain command, it will be affected by their second highest level (and this repeats). If the user has the same level twice that both overwrite the command (assuming the overwrites are different), then the order of the levels in the configuration file determines which takes priority. Summary TLDR; if you have a complex system of overlapping levels, it is best to just remove any unnecessary roles from the user that could cause conflicts.","title":"Access Control"},{"location":"config/access-control/#levels-and-what-they-mean","text":"A level is sort of like a preset of commands that a role should use. For example, users with the mod level should be able to use Moderation commands, but not Administration commands (such as lockdown and infraction clearing). Below, you'll find a table showing which level ID matches a particular role. Role Level Administrator 100 Moderator 90 Trusted 10 Default 0","title":"Levels and what they mean"},{"location":"config/access-control/#creating-your-own-levels","text":"Currently, there's no way to create your own level designation (e.g. 80 for trial mod), but it is planned. However, you can achieve the same effect by using an existing level as a base then adding overwrites. For example, here's what a trial mod level would look like (trial mods may have different access to commands for your server but the idea is the same). access_control : 123456789098765432 : # role ID level : 90 # we'll use moderator as a base here overwrites : ban : false unban : false inf search : false inf recent : false","title":"Creating your own levels"},{"location":"config/access-control/#breaking-it-down","text":"Alright so this look a little scary at first, but I promise it isn't! To summarise, the example above essentially means: trial mods can use all mod commands apart from ban, unban, inf search and inf recent . If you're still struggling, the good guys and gals in the official Discord server can give you a hand!","title":"Breaking it down"},{"location":"config/access-control/#hierarchy","text":"The hierarchy for overlapping levels can be incredibly confusing, but I'll try to summarise it anyway. In short, the user's access to commands is first affected by their highest level. If their highest level doesn't affect a certain command, it will be affected by their second highest level (and this repeats). If the user has the same level twice that both overwrite the command (assuming the overwrites are different), then the order of the levels in the configuration file determines which takes priority. Summary TLDR; if you have a complex system of overlapping levels, it is best to just remove any unnecessary roles from the user that could cause conflicts.","title":"Hierarchy"},{"location":"config/auto-roles/","text":"By configuring auto_roles , you can tell Captain to assign specific roles to new users. You can even decide to give a role to any new bots that join, but not regular users (and vice versa). Example auto_roles : 123456789098765432 : # role ID - HUMAN 123456789098765432 : # role ID - BOT User Type Key Regular user HUMAN Bot account BOT","title":"Auto Roles"},{"location":"config/infractions/","text":"The infractions config options allow you to specify a handful of settings that change how infractions are carried out by the bot. Example infractions : mute_role : 123456789098765432 # role ID ban_purge_days : 7 # any number between 0 and 7 Mute role \u00b6 In short, the mute_role is the ID of the role that is added/removed from users when they are muted/unmuted respectively. Ban Purge Days \u00b6 The ban_purge_days is the number of days worth of recent messages that will be deleted when a user is banned. This is actually a part of Discord so there isn't much room to expand upon this.","title":"Infractions"},{"location":"config/infractions/#mute-role","text":"In short, the mute_role is the ID of the role that is added/removed from users when they are muted/unmuted respectively.","title":"Mute role"},{"location":"config/infractions/#ban-purge-days","text":"The ban_purge_days is the number of days worth of recent messages that will be deleted when a user is banned. This is actually a part of Discord so there isn't much room to expand upon this.","title":"Ban Purge Days"},{"location":"config/lockdown/","text":"You can control a handful of options for locking down channels with the lockdown option. Example lockdown : locked_role : everyone # or role ID whitelist : - 123456789098765432 # role ID Locked role \u00b6 This option allows you to change which role is given the channel override that stops them from speaking. Most of the time, this should be everyone , but it could also be the ID of a role that most/all members have. Whitelist \u00b6 This is a list of roles that are specifically allowed to talk during a lockdown. Often times, this will be for Moderators and trusted people.","title":"Lockdown"},{"location":"config/lockdown/#locked-role","text":"This option allows you to change which role is given the channel override that stops them from speaking. Most of the time, this should be everyone , but it could also be the ID of a role that most/all members have.","title":"Locked role"},{"location":"config/lockdown/#whitelist","text":"This is a list of roles that are specifically allowed to talk during a lockdown. Often times, this will be for Moderators and trusted people.","title":"Whitelist"},{"location":"config/logs/","text":"The logs option allows you to tell Captain which events should be logged to which channels. Example logs : 123456789098765432 : # text channel ID - MEMBER_BAN - MEMBER_TEMPBAN - MEMBER_BAN_EXPIRE - MEMBER_UNBAN - MEMBER_KICK - MEMBER_MUTE - MEMBER_REMUTE - MEMBER_TEMPMUTE - MEMBER_MUTE_EXPIRE - MEMBER_UNMUTE - MEMBER_WARN - LOCKDOWN - LOCKDOWN_TEMP - LOCKDOWN_EXPIRE - LOCKDOWN_CANCEL 123456789098765432 : # text channel ID - MEMBER_JOIN - MEMBER_LEAVE 123456789098765432 : # text channel ID - MESSAGE_EDIT - MESSAGE_DELETE - MESSAGE_BULK_DELETE Event Key Member banned MEMBER_BAN Member temp-banned MEMBER_TEMP_BAN Member unbanned MEMBER_UNBAN Member ban expired MEMBER_BAN_EXPIRE Member kicked MEMBER_KICK Member muted MEMBER_MUTE Member temp-muted MEMBER_TEMP_MUTE Member re-muted MEMBER_REMUTE Member unmuted MEMBER_UNMUTE Member mute expired MEMBER_MUTE_EXPIRE Member warned MEMBER_WARN Lockdown started LOCKDOWN Temp lockdown started LOCKDOWN_TEMP Lockdown expired LOCKDOWN_EXPIRE Lockdown cancelled LOCKDOWN_CANCEL Member joined MEMBER_JOIN Member left MEMBER_LEAVE Message edited MESSAGE_EDIT Message deleted MESSAGE_DELETE Many messages deleted MESSAGE_BULK_DELETE Channel created CHANNEL_CREATE Channel deleted CHANNEL_DELETE Role created ROLE_CREATE Role deleted ROLE_DELETE Nickname added NICKNAME_ADD Nickname changed NICKNAME_CHANGE Nickname removed NICKNAME_REMOVE","title":"Logging"},{"location":"intro/changelog/","text":"v3.1.0 \u00b6 This release implements the following changes: Introduced reminder functionality Fixed a variety of low-priority bugs Fixed an issue where the default command level had absolutely no affect Updated and moved documentation here v3.0.0 \u00b6 This completely overhauls the bot. All of the code has been rewritten and some functionality has been redesigned. v1.0.0 \u00b6 The initial development release that is stable but in active development and frequently updated.","title":"Changelog"},{"location":"intro/changelog/#v310","text":"This release implements the following changes: Introduced reminder functionality Fixed a variety of low-priority bugs Fixed an issue where the default command level had absolutely no affect Updated and moved documentation here","title":"v3.1.0"},{"location":"intro/changelog/#v300","text":"This completely overhauls the bot. All of the code has been rewritten and some functionality has been redesigned.","title":"v3.0.0"},{"location":"intro/changelog/#v100","text":"The initial development release that is stable but in active development and frequently updated.","title":"v1.0.0"},{"location":"intro/get-captain/","text":"There are two ways to get your hands on Captain: You run your own instance; Someone lets you use their instance There are pros and cons to each method and I'll run through most of them here. Running your own instance \u00b6 Pros: You have complete control over it, so you can start/stop and change any files whenever you like; You can upload it to your own machine meaning that you don't have to rely on the uptime of someone else's machine Cons: You have to have your own machine that you can host the bot on; You have to set Captain up yourself, which means you need to understand how to read technical documentation and use Linux servers. Using someone else's instance \u00b6 Pros: You don't have to set it up yourself; There's pretty much no investment needed Cons: You have to rely on someone's upkeep of the bot; You can't change your guild's configuration when you want (this may change in the future); You have to actually find someone who will let you use their instance Summary \u00b6 All in all, if you have the technical skill required, it is better to run your own. However, if you don't have the skill and really need the bot, you can contact me in the official Discord server and I will arrange for you to use the official instance.","title":"Get Captain"},{"location":"intro/get-captain/#running-your-own-instance","text":"Pros: You have complete control over it, so you can start/stop and change any files whenever you like; You can upload it to your own machine meaning that you don't have to rely on the uptime of someone else's machine Cons: You have to have your own machine that you can host the bot on; You have to set Captain up yourself, which means you need to understand how to read technical documentation and use Linux servers.","title":"Running your own instance"},{"location":"intro/get-captain/#using-someone-elses-instance","text":"Pros: You don't have to set it up yourself; There's pretty much no investment needed Cons: You have to rely on someone's upkeep of the bot; You can't change your guild's configuration when you want (this may change in the future); You have to actually find someone who will let you use their instance","title":"Using someone else's instance"},{"location":"intro/get-captain/#summary","text":"All in all, if you have the technical skill required, it is better to run your own. However, if you don't have the skill and really need the bot, you can contact me in the official Discord server and I will arrange for you to use the official instance.","title":"Summary"},{"location":"setup/installation/","text":"Cloning the Repository \u00b6 First thing's first, clone the repository! git clone https://github.com/Jack-Gledhill/captain Configuration files \u00b6 Make sure to cd into the captain/bot directory. Now you need to edit 2 files. These two files are config.example.yml and guilds.example.yml , you need to rename them to have the .yml without the .example then edit them. On the other hand, config.yml only contains the information for the PostgreSQL and Redis servers. You'll need to make sure to edit this before you can run the bot. Lastly, you'll need to rename core/constants.example.py to core/constants.py then edit it. This file contains information for the core, like the bot's token and presence information. Deploying a Captain container \u00b6 Deploying a container needs to be done in two steps. First you need to build the image, then you need to run an instance of that image. It's easy though so don't worry! To build an image, cd into captain/bot then run docker build . docker build . --tag captain:3.1.0 Now all that's left to do is run an instance of the container with docker run . docker run -d --name captain --network=\"host\" captain:3.1.0 Additional support \u00b6 Congratulations, you have officially set up your own Captain bot! If, somehow, you haven't, then join the official Discord server and we'll be happy to lend a hand!","title":"Installation"},{"location":"setup/installation/#cloning-the-repository","text":"First thing's first, clone the repository! git clone https://github.com/Jack-Gledhill/captain","title":"Cloning the Repository"},{"location":"setup/installation/#configuration-files","text":"Make sure to cd into the captain/bot directory. Now you need to edit 2 files. These two files are config.example.yml and guilds.example.yml , you need to rename them to have the .yml without the .example then edit them. On the other hand, config.yml only contains the information for the PostgreSQL and Redis servers. You'll need to make sure to edit this before you can run the bot. Lastly, you'll need to rename core/constants.example.py to core/constants.py then edit it. This file contains information for the core, like the bot's token and presence information.","title":"Configuration files"},{"location":"setup/installation/#deploying-a-captain-container","text":"Deploying a container needs to be done in two steps. First you need to build the image, then you need to run an instance of that image. It's easy though so don't worry! To build an image, cd into captain/bot then run docker build . docker build . --tag captain:3.1.0 Now all that's left to do is run an instance of the container with docker run . docker run -d --name captain --network=\"host\" captain:3.1.0","title":"Deploying a Captain container"},{"location":"setup/installation/#additional-support","text":"Congratulations, you have officially set up your own Captain bot! If, somehow, you haven't, then join the official Discord server and we'll be happy to lend a hand!","title":"Additional support"},{"location":"setup/prerequisites/","text":"A host \u00b6 The first, and most important, thing you'll need is a host. This can be a dedicated server (this could be an enterprise-grade server or just an old computer) or a virtual server (AKA VPS). Either way, the important thing you'll need is 24/7 uptime (or close to it). There are many providers out there that you can rent VPSs or dedicated servers from. Personally, I rent a 4 core, 8 GB RAM VPS from Contabo at \u00a34.50/m (about $5.90/m or 5 euros/m). Important note: the host you use MUST be running a Linux distribution! This guide assumes you're using a Ubuntu host, but any Linux host will have similar setup instructions. Git \u00b6 Git is an important CLI tool that's usually already installed on most Linux distributions. If it isn't, run the command below. sudo apt-get install git PostgreSQL \u00b6 You'll also need a PostgreSQL server. In layman's terms, this is a database. I recommend using this guide if you're using an Ubuntu server. If you're not using Ubuntu, I'm sure a quick Google search for your specific distro should do it. Docker \u00b6 Docker is a piece of software we use to place other software into what we call a \"container\". In simple terms, a container is an isolated environment that gives users superior control over the software they're running. I use this guide to get Docker up and running properly. Redis \u00b6 The final prerequisite is Redis. Redis is an in-memory database (in other words a cache) that Captain uses to temporarily store information for spam detection. You'll find that this guide will prove useful. As long as you run your Redis server on the same host as Captain, there isn't much need to setup a password since the information only lasts for a few seconds and doesn't reveal anything secret. Besides, only software on your host could access Redis in the first place.","title":"Prerequisites"},{"location":"setup/prerequisites/#a-host","text":"The first, and most important, thing you'll need is a host. This can be a dedicated server (this could be an enterprise-grade server or just an old computer) or a virtual server (AKA VPS). Either way, the important thing you'll need is 24/7 uptime (or close to it). There are many providers out there that you can rent VPSs or dedicated servers from. Personally, I rent a 4 core, 8 GB RAM VPS from Contabo at \u00a34.50/m (about $5.90/m or 5 euros/m). Important note: the host you use MUST be running a Linux distribution! This guide assumes you're using a Ubuntu host, but any Linux host will have similar setup instructions.","title":"A host"},{"location":"setup/prerequisites/#git","text":"Git is an important CLI tool that's usually already installed on most Linux distributions. If it isn't, run the command below. sudo apt-get install git","title":"Git"},{"location":"setup/prerequisites/#postgresql","text":"You'll also need a PostgreSQL server. In layman's terms, this is a database. I recommend using this guide if you're using an Ubuntu server. If you're not using Ubuntu, I'm sure a quick Google search for your specific distro should do it.","title":"PostgreSQL"},{"location":"setup/prerequisites/#docker","text":"Docker is a piece of software we use to place other software into what we call a \"container\". In simple terms, a container is an isolated environment that gives users superior control over the software they're running. I use this guide to get Docker up and running properly.","title":"Docker"},{"location":"setup/prerequisites/#redis","text":"The final prerequisite is Redis. Redis is an in-memory database (in other words a cache) that Captain uses to temporarily store information for spam detection. You'll find that this guide will prove useful. As long as you run your Redis server on the same host as Captain, there isn't much need to setup a password since the information only lasts for a few seconds and doesn't reveal anything secret. Besides, only software on your host could access Redis in the first place.","title":"Redis"},{"location":"setup/updating/","text":"Whenever a new Captain update arrives, you'll probably want to get it. This guide runs through the simple process of updating your Captain instance! Pull the repository \u00b6 The first step is to download the new repository code. git pull Warning You may find that new sections have been added to the configuration files. If so, you'll need to update your existing configuration files appropriately! Recreating the image \u00b6 Next, you'll need to recreate the Docker image for Captain. This is a pretty simple task, much like the one in the installation guide. First of all, make sure to cd into the captain/bot directory. Now run docker build like so: docker build . --tag captain:3.1.0 Redeploying the container \u00b6 Redeploying Captain is a little more long-winded but should be an easy task. The first task is to stop the running container. docker stop captain After that, you'll need to remove the container. docker rm captain Now, you're ready to recreate the container just like you did before! docker run -d --name captain --network=\"host\" captain:3.1.0","title":"Updating"},{"location":"setup/updating/#pull-the-repository","text":"The first step is to download the new repository code. git pull Warning You may find that new sections have been added to the configuration files. If so, you'll need to update your existing configuration files appropriately!","title":"Pull the repository"},{"location":"setup/updating/#recreating-the-image","text":"Next, you'll need to recreate the Docker image for Captain. This is a pretty simple task, much like the one in the installation guide. First of all, make sure to cd into the captain/bot directory. Now run docker build like so: docker build . --tag captain:3.1.0","title":"Recreating the image"},{"location":"setup/updating/#redeploying-the-container","text":"Redeploying Captain is a little more long-winded but should be an easy task. The first task is to stop the running container. docker stop captain After that, you'll need to remove the container. docker rm captain Now, you're ready to recreate the container just like you did before! docker run -d --name captain --network=\"host\" captain:3.1.0","title":"Redeploying the container"}]}